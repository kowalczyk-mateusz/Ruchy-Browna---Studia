// https://github.com/vasturiano/d3-force-surface Version 0.4.4. Copyright 2017 Vasco Asturiano.
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.d3=t.d3||{})}(this,function(t){"use strict";var n=function(t){return function(){return t}},o=function(){function t(){function t(t,n){function o(t,n,o){const r=(o.y-t.y)*(n.x-t.x),f=(n.y-t.y)*(o.x-t.x);return r>f+Number.EPSILON?1:r+Number.EPSILON<f?-1:0}return o(t.from,n.from,n.to)!=o(t.to,n.from,n.to)&&o(t.from,t.to,n.from)!=o(t.from,t.to,n.to)}function n({x:x,y:y},{x:trX,y:trY}){return{x:x+trX,y:y+trY}}function y({from:from,to:to},t){return{from:n(from,t),to:n(to,t)}}function x({x:x,y:y},t){const n=m(x,y);return s(n.d,n.a+t)}function m(t,n){return t=t||0,{d:Math.sqrt(t*t+n*n),a:0===t&&0===n?0:Math.atan(n/t)+(t<0?Math.PI:0)}}function s(t,n){return{x:t*Math.cos(n),y:t*Math.sin(n)}}function h(t){const n=2*Math.PI;for(;t<0;)t+=n;for(;t>n;)t-=n;return t}o.forEach(o=>{const d=u(o),l=m(o.vx,o.vy),M={from:{x:o.x,y:o.y},to:{x:o.x+o.vx,y:o.y+o.vy}};f.forEach(f=>{const u={from:c(f),to:i(f)},p=m(u.to.x-u.from.x,u.to.y-u.from.y),I=h(p.a-l.a)<Math.PI;if(!I||!a(f)){const c=y(M,s(d,p.a+Math.PI/2*(I?-1:1))),i={from:n(o,s(d,p.a-Math.PI/2)),to:n(o,s(d,p.a+Math.PI/2))},m=t(u,i);if(m||t(u,c)){const t=s(l.d,l.a-p.a);if(t.y*=-e,({x:o.vx,y:o.vy}=x(t,p.a)),m&&!a(f)){const t=s(x(n(c.from,{x:-u.from.x,y:-u.from.y}),-p.a).y,p.a-Math.PI/2);o.x+=t.x,o.y+=t.y}r&&r(o,f)}}})})}let o,r,f=[],e=1,u=t=>1,c=t=>t.from,i=t=>t.to,a=t=>!!t.oneWay;return t.initialize=function(t){o=t},t.surfaces=function(n){return arguments.length?(f=n,t):f},t.elasticity=function(n){return arguments.length?(e=n,t):e},t.radius=function(o){return arguments.length?(u="function"==typeof o?o:n(+o),t):u},t.from=function(n){return arguments.length?(c=n,t):c},t.to=function(n){return arguments.length?(i=n,t):i},t.oneWay=function(o){return arguments.length?(a="function"==typeof o?o:n(!!o),t):a},t.onImpact=function(n){return arguments.length?(r=n,t):r},t};t.forceSurface=o,Object.defineProperty(t,"__esModule",{value:!0})});